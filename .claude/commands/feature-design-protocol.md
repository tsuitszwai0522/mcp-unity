
# Feature Design Protocol for Claude Code

此規則為 Claude Code 執行 Feature Design 的行為規範。

## 核心規則 (Core Rules)

1. **語言要求**：所有溝通、文件撰寫必須使用 **zh-TW**。
2. **禁止搶跑**：在使用者明確表示「批准」或「Approve」之前，**禁止修改專案代碼**。
3. **主動澄清**：若需求有任何模糊不清之處，必須立即提問，**不可自行假設**。

## 觸發條件 (When to Activate)

當使用者說出以下類型的請求時，啟動此流程：
- 「我想做一個...系統」
- 「幫我設計...功能」
- 「如何實作...？」
- 「討論一下...的架構」

## 執行流程 (Workflow)

### 第一階段：需求澄清 (Requirement Clarification)

1. **確認理解**：
   - 覆述使用者的需求，確保理解正確。
   - 列出任何需要澄清的問題（以編號列表呈現）。
   - **等待回覆後才能繼續**。

2. **初始化文件**：
   - 在 `doc/requirement/` 目錄下建立 `feature_{name}.md`。
   - 若目錄不存在，先建立之。

### 第二階段：方案比較 (Solution Comparison)

1. **方案列舉**：
   - 列出 **至少 2 種可行方案**。
   - 針對每種方案，提供：優點 (Pros)、缺點 (Cons)、與現有架構的相容性。

2. **暫停詢問**：
   - 列出所有方案後，**必須暫停**，請使用者選擇偏好方案。

3. **記錄決策**：
   - 將使用者的選擇與理由記錄在文件中。

### 第三階段：文件定稿與交接 (Finalization)

1. **更新設計文件**，確保包含：需求描述、技術方案、待解問題、任務清單。

2. **交接提示**：當用戶表示「批准」時，輸出確認訊息。

## 輸出規範

| 項目 | 路徑 |
|------|------|
| 設計文件 | `doc/requirement/feature_{name}.md` |
| 文件命名 | 使用 snake_case |

## 禁止事項 (Don'ts)

1. ❌ 在用戶 Approve 前修改專案代碼
2. ❌ 跳過方案比較直接採用單一方案
3. ❌ 假設使用者的意圖
